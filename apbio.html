
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AP Biology Quiz – Tklesson</title>

<link rel="canonical" href="https://tklesson.com/" />
<link rel="icon" type="image/png" sizes="16x16" href="/Tklesson1-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/Tklesson1-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="/Tklesson1-48x48.png">
<link rel="icon" type="image/png" sizes="64x64" href="/Tklesson1-64x64.png">
<link rel="icon" type="image/png" sizes="192x192" href="/Tklesson1-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/Tklesson1-512x512.png">
<link rel="apple-touch-icon" href="/Tklesson1-192x192.png">
<meta name="theme-color" content="#ffffff">

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-99H54WVS80"></script>
<script>
  window.addEventListener('load', function() {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-99H54WVS80');
  });
</script>

<style>
body { font-family: Arial, sans-serif; background: #f0f8ff; margin:0; padding:0; }
header { background: #01579b; color: white; padding: 15px; text-align: center; }
header img { max-height: 60px; vertical-align: middle; margin-right: 10px; }
h1 { display: inline; font-size: 2em; }
h2 { font-size: 1.2em; font-weight: normal; color: #e1f5fe; margin-top: 5px; }
.quiz-container { max-width: 900px; margin: 30px auto; padding: 25px; background: white; border-radius: 12px; box-shadow: 0 0 15px #555; }
.question { margin-bottom: 20px; padding: 10px; border-radius: 8px; background: #e1f5fe; }
.question p { font-weight: bold; }
.options label { display: block; margin-bottom: 5px; }
input[type="text"], input[type="email"] { width: 100%; padding: 6px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc; }
button { background-color: #0288d1; color: white; padding: 10px 25px; border: none; cursor: pointer; font-size: 1em; border-radius: 5px; margin-top: 10px; margin-right: 10px; }
button:hover { background-color: #01579b; }
.correct { background-color: #c8e6c9; }
.wrong { background-color: #ffcdd2; }
#score { font-size: 1.3em; font-weight: bold; margin-top: 15px; }
.timer { text-align: right; font-weight: bold; margin-bottom: 15px; }
.email-container { margin-bottom: 15px; }
#submission-message { margin-top: 10px; font-weight: bold; color: #01579b; }
</style>
</head>
<body>

<header>
    <img src="Tklesson1.png" alt="Tklesson Logo">
    <h1>AP Biology Quiz – Tklesson</h1>
    <h2>AP Biology Quiz</h2>
</header>

<div class="quiz-container">
    <div class="email-container">
        <label for="name">Enter your name (required):</label>
        <input type="text" id="name" placeholder="Your name" required>
    </div>
    <div class="email-container">
        <label for="email">Enter your email (required):</label>
        <input type="email" id="email" placeholder="you@example.com" required>
    </div>

    <div class="timer" id="timer">45:00</div>
    <div id="quiz-container"></div>

    <div class="button-row">
        <button id="submitBtn" onclick="checkAnswers()">Submit</button>
        <button id="restartBtn" onclick="restartQuiz()">Restart Quiz</button>
    </div>

    <div id="score"></div>
    <div id="submission-message"></div>
</div>

<script>
// === Questions ===
const questions = [
    // Homeostasis
    {type:'mcq', q:"Which of the following best defines homeostasis?", options:["The ability of an organism to sense stimuli","Maintaining a constant internal environment","The breakdown of food into energy","The ability to reproduce"], answer:"Maintaining a constant internal environment"},
    {type:'mcq', q:"Which organ is primarily responsible for regulating blood glucose levels?", options:["Liver","Kidney","Lungs","Skin"], answer:"Liver"},
    {type:'mcq', q:"When body temperature rises above normal, which response occurs?", options:["Shivering","Sweating","Increased hunger","Pupil dilation"], answer:"Sweating"},
    {type:'mcq', q:"The hormone that lowers blood glucose is _______.", options:["Glucagon","Insulin","Adrenaline","Thyroxine"], answer:"Insulin"},
    {type:'mcq', q:"Negative feedback in homeostasis means:", options:["The response enhances the stimulus","The response reverses the stimulus","There is no effect on the stimulus","It always increases body temperature"], answer:"The response reverses the stimulus"},
    {type:'mcq', q:"Osmoregulation is mainly controlled by which organ?", options:["Lungs","Kidneys","Heart","Pancreas"], answer:"Kidneys"},
    {type:'mcq', q:"Which part of the brain regulates temperature?", options:["Cerebellum","Medulla","Hypothalamus","Cerebrum"], answer:"Hypothalamus"},
    {type:'mcq', q:"Which of these is an example of positive feedback?", options:["Sweating to reduce temperature","Blood clotting","Regulation of blood sugar","Osmoregulation"], answer:"Blood clotting"},
    {type:'mcq', q:"If blood water concentration falls, ADH secretion _______.", options:["Decreases","Increases","Stops","Remains unchanged"], answer:"Increases"},
    {type:'mcq', q:"Which of the following is not a homeostatic process?", options:["Regulation of blood pH","Maintenance of constant body temperature","Maintenance of constant external temperature","Regulation of water balance"], answer:"Maintenance of constant external temperature"},

    // Sensitivity
    {type:'mcq', q:"Sensitivity in living organisms is defined as:", options:["The ability to reproduce","The ability to detect and respond to stimuli","The ability to move","The ability to maintain body temperature"], answer:"The ability to detect and respond to stimuli"},
    {type:'mcq', q:"Which part of the eye controls the amount of light entering?", options:["Lens","Cornea","Iris","Retina"], answer:"Iris"},
    {type:'mcq', q:"Which receptor detects changes in temperature?", options:["Chemoreceptor","Photoreceptor","Thermoreceptor","Mechanoreceptor"], answer:"Thermoreceptor"},
    {type:'mcq', q:"Which nervous system controls voluntary actions?", options:["Autonomic nervous system","Central nervous system","Peripheral nervous system","Somatic nervous system"], answer:"Somatic nervous system"},
    {type:'mcq', q:"Which of the following is not a sense organ?", options:["Eye","Skin","Kidney","Ear"], answer:"Kidney"},
    {type:'mcq', q:"Which part of the brain controls reflex actions?", options:["Cerebellum","Medulla oblongata","Cerebrum","Hypothalamus"], answer:"Medulla oblongata"},
    {type:'mcq', q:"The functional unit of the nervous system is the _______.", options:["Neuron","Axon","Dendrite","Synapse"], answer:"Neuron"},
    {type:'mcq', q:"In plants, the growth of a shoot towards light is called:", options:["Geotropism","Phototropism","Hydrotropism","Thigmotropism"], answer:"Phototropism"},
    {type:'mcq', q:"Which type of neurone carries impulses from receptors to the CNS?", options:["Relay neurone","Motor neurone","Sensory neurone","Effector neurone"], answer:"Sensory neurone"},
    {type:'mcq', q:"Which structure transmits impulses across a synapse?", options:["Neurotransmitter","Dendrite","Myelin sheath","Axon"], answer:"Neurotransmitter"},

    // Macromolecules
    {type:'mcq', q:"Which of the following is not a macromolecule?", options:["Carbohydrates","Proteins","Lipids","Vitamins"], answer:"Vitamins"},
    {type:'mcq', q:"The monomers of proteins are:", options:["Glucose","Fatty acids","Amino acids","Nucleotides"], answer:"Amino acids"},
    {type:'mcq', q:"Which of the following is a polysaccharide?", options:["Glucose","Sucrose","Starch","Fructose"], answer:"Starch"},
    {type:'mcq', q:"Which element is present in proteins but not in carbohydrates?", options:["Carbon","Nitrogen","Oxygen","Hydrogen"], answer:"Nitrogen"},
    {type:'mcq', q:"DNA and RNA are examples of _______.", options:["Carbohydrates","Lipids","Nucleic acids","Proteins"], answer:"Nucleic acids"},
    {type:'mcq', q:"Which of the following lipids is important in cell membrane structure?", options:["Cholesterol","Phospholipids","Steroids","Waxes"], answer:"Phospholipids"},
    {type:'mcq', q:"Which test is used to detect proteins?", options:["Benedict’s test","Biuret test","Iodine test","Ethanol test"], answer:"Biuret test"},
    {type:'mcq', q:"Which bond holds amino acids together in proteins?", options:["Hydrogen bond","Ionic bond","Peptide bond","Glycosidic bond"], answer:"Peptide bond"},
    {type:'mcq', q:"Which macromolecule stores genetic information?", options:["Proteins","Lipids","Nucleic acids","Carbohydrates"], answer:"Nucleic acids"},
    {type:'mcq', q:"Which polysaccharide is found in plant cell walls?", options:["Starch","Glycogen","Cellulose","Chitin"], answer:"Cellulose"},
    {type:'mcq', q:"Which test is used to detect reducing sugars?", options:["Iodine test","Biuret test","Benedict’s test","Sudan III test"], answer:"Benedict’s test"},
    {type:'mcq', q:"Which polysaccharide is used as energy storage in animals?", options:["Starch","Cellulose","Glycogen","Maltose"], answer:"Glycogen"},
    {type:'mcq', q:"The basic building block of carbohydrates is _______.", options:["Monosaccharide","Polysaccharide","Amino acid","Fatty acid"], answer:"Monosaccharide"},
    {type:'mcq', q:"Enzymes are biologically important because they:", options:["Act as hormones","Store energy","Speed up reactions","Provide structural support"], answer:"Speed up reactions"},
    {type:'mcq', q:"Which macromolecule includes steroids and waxes?", options:["Carbohydrates","Lipids","Proteins","Nucleic acids"], answer:"Lipids"},
    {type:'mcq', q:"Which test detects starch in food?", options:["Iodine test","Benedict’s test","Biuret test","Sudan III test"], answer:"Iodine test"},
    {type:'mcq', q:"The sugar found in DNA is _______.", options:["Ribose","Fructose","Glucose","Deoxyribose"], answer:"Deoxyribose"},
    {type:'mcq', q:"Which molecule carries amino acids during protein synthesis?", options:["mRNA","tRNA","rRNA","DNA"], answer:"tRNA"},
    {type:'mcq', q:"Which macromolecule provides the most energy per gram?", options:["Proteins","Carbohydrates","Lipids","Nucleic acids"], answer:"Lipids"},
    {type:'mcq', q:"Which vitamin is fat-soluble?", options:["Vitamin C","Vitamin B","Vitamin D","Vitamin B12"], answer:"Vitamin D"}
];

// Shuffle
function shuffleArray(arr){ return arr.sort(() => Math.random() - 0.5); }
shuffleArray(questions);
questions.forEach(q => { if(q.type==='mcq'){ shuffleArray(q.options); } });

const container = document.getElementById('quiz-container');

function renderQuiz(){
    container.innerHTML = '';
    questions.forEach((q, idx)=>{
        const div = document.createElement('div');
        div.classList.add('question');
        div.id = `qdiv${idx}`;
        div.innerHTML = `<p>${idx+1}. ${q.q}</p>`;
        if(q.type==='mcq'){
            div.innerHTML += '<div class="options">' + q.options.map(opt =>
                `<label><input type="radio" name="q${idx}" value="${opt}"> ${opt}</label>`).join('') + '</div>';
        } else if(q.type==='fill'){
            div.innerHTML += `<input type="text" id="q${idx}" placeholder="Type your answer here">`;
        }
        container.appendChild(div);
    });
    document.getElementById('score').innerText = '';
    document.getElementById('submission-message').textContent = '';
}

// Disable quiz
function disableQuiz(){
    const inputs = document.querySelectorAll('#quiz-container input[type="text"], #quiz-container input[type="radio"]');
    inputs.forEach(input => { input.disabled = true; input.style.backgroundColor = '#f0f0f0'; });
    const restartBtn = document.getElementById('restartBtn');
    restartBtn.disabled = true; restartBtn.style.backgroundColor = '#cccccc'; restartBtn.style.cursor = 'not-allowed';
}

// Timer
let remaining = 45*60;
const timerEl = document.getElementById('timer');
function pad(n){ return n.toString().padStart(2,'0'); }
function updateTimer(){
    const min = Math.floor(remaining/60);
    const sec = remaining % 60;
    timerEl.textContent = `${pad(min)}:${pad(sec)}`;
    if(remaining <= 0){ clearInterval(timerId); disableQuiz(); alert('Time is up!'); }
    remaining--;
}
let timerId = setInterval(updateTimer,1000);
updateTimer();

// Check answers, send full quiz to backend
async function checkAnswers(){
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const msgEl = document.getElementById('submission-message');
    msgEl.textContent = '';

    if(!nameInput.value.trim()){ msgEl.textContent="Name is required!"; return; }
    if(!emailInput.value.trim()){ msgEl.textContent="Email is required!"; return; }

    let score = 0;

    const submissionData = questions.map((q, idx) => {
        let userAns;
        const div = document.getElementById(`qdiv${idx}`);
        div.classList.remove('correct','wrong');

        if(q.type==='mcq'){
            const selected = document.querySelector(`input[name="q${idx}"]:checked`);
            userAns = selected ? selected.value : 'No answer';
            if(selected && selected.value === q.answer){ div.classList.add('correct'); score++; }
            else { div.classList.add('wrong'); div.innerHTML += `<p style="color:#01579b;">You answered: ${userAns} | Correct: ${q.answer}</p>`; }
        } else {
            userAns = document.getElementById(`q${idx}`).value.trim() || 'No answer';
            const answers = Array.isArray(q.answer) ? q.answer.map(a=>a.toLowerCase()) : [q.answer.toLowerCase()];
            if(answers.includes(userAns.toLowerCase())){ div.classList.add('correct'); score++; }
            else { div.classList.add('wrong'); div.innerHTML += `<p style="color:#01579b;">You answered: ${userAns} | Correct: ${q.answer[0]}</p>`; }
        }

        return { question: q.q, correctAnswer: q.answer, userAnswer: userAns };
    });

    document.getElementById('score').innerText = `Your score: ${score} / ${questions.length}`;

    disableQuiz();

    // Send to backend
    try {
        const response = await fetch('https://myedu-backend.onrender.com/submit-quiz',{
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ 
                name: nameInput.value.trim(),
                email: emailInput.value.trim(),
                score,
                total: questions.length,
                test: "AP Biology Quiz",
                answers: submissionData
            })
        });
        const result = await response.json();
        msgEl.textContent = result.message || "Quiz submitted successfully!";
    } catch(err){
        console.error(err);
        msgEl.textContent = "Error sending quiz to server.";
    }
}

function restartQuiz(){
    shuffleArray(questions);
    questions.forEach(q => { if(q.type==='mcq'){ shuffleArray(q.options); } });
    renderQuiz();
}

renderQuiz();
</script>

</body>
</html>
